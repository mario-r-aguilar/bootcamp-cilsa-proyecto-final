<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="application to manage a task list" />
		<meta
			name="keywords"
			content="task list, web application, manage tasks, lista de tareas, administrar tareas"
		/>
		<!-- Bootstrap Styles-->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
			crossorigin="anonymous"
		/>
		<!-- CSS de DataTables compatible con Bootstrap -->
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap4.min.css"
		/>

		<!-- Bootstrap Icons -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
		/>
		<!-- Own styles -->
		<link rel="stylesheet" href="../css/main-style.css" />

		<title>Lista de tareas | Mi Perfil</title>
	</head>
	<body>
		<header>
			<nav class="navbar navbar-expand-lg sticky-top bg-dark">
				<div class="container-fluid">
					<a class="navbar-brand" href="/profile">
						<img
							src="../img/logo_bco.webp"
							alt="Bootstrap"
							width="75"
							height="75"
						/>
					</a>
					<button
						class="navbar-toggler"
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#navbarNav"
						aria-controls="navbarNav"
						aria-expanded="false"
						aria-label="Toggle navigation"
					>
						<i class="text-light bi bi-list"></i>
					</button>
					<div class="collapse navbar-collapse" id="navbarNav">
						<ul class="navbar-nav m-auto">
							<li class="nav-item">
								<a class="nav-link" aria-current="page" href="/profile"
									>Mi perfil</a
								>
							</li>

							<li class="nav-item">
								<a class="nav-link" href="/editprofile">Editar Perfil</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#">Desloguearse</a>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>

		<main class="mt-5 mb-5">
			<div class="container">
				<!-- AQUI VA EL CONTENIDO PRINCIPAL DE LA PÁGINA -->

				<button
					class="btn btn-success btn-sm mb-4"
					data-bs-toggle="modal"
					data-bs-target="#addNewTask"
				>
					Agregar Tarea
				</button>
				<div class="table-responsive">
					<table id="example" class="table table-striped table-bordered">
						<!-- <div class="container w-25 d-flex"></div> -->
						<thead>
							<tr>
								<th>Id</th>
								<th>Nombre</th>
								<th>Descripción</th>
								<th>Estado</th>
								<th>Última modificación</th>
								<th>Acciones</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<!-- Columna "Id" -->
								<td>Mario</td>
								<!-- Columna "Nombre" -->
								<td>Crear index</td>
								<!-- Columna "Descripción" -->
								<td>En curso</td>
								<!-- Columna "Estado" -->
								<td>2024/09/12</td>
								<!-- Columna "Última modificación" -->
								<td>
									<!-- Columna "Acciones" -->
									<button
										class="btn btn-primary btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#confirmUpdateTask"
									>
										Editar
									</button>

									<button
										type="button"
										class="btn btn-danger btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#deleteTask"
									>
										Eliminar
									</button>
								</td>
							</tr>
							<tr>
								<td>2</td>
								<!-- Columna "Id" -->
								<td>Lautaro</td>
								<!-- Columna "Nombre" -->
								<td>Crear user-profile</td>
								<!-- Columna "Descripción" -->
								<td>En curso</td>
								<!-- Columna "Estado" -->
								<td>2024/09/12</td>
								<!-- Columna "Última modificación" -->
								<td>
									<!-- Columna "Acciones" -->
									<button
										class="btn btn-primary btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#confirmUpdateTask"
									>
										Editar
									</button>

									<button
										type="button"
										class="btn btn-danger btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#deleteTask"
									>
										Eliminar
									</button>
								</td>
							</tr>
							<tr>
								<td>3</td>
								<!-- Columna "Id" -->
								<td>Fer</td>
								<!-- Columna "Nombre" -->
								<td>Crear edit-task</td>
								<!-- Columna "Descripción" -->
								<td>En curso</td>
								<!-- Columna "Estado" -->
								<td>2024/09/12</td>
								<!-- Columna "Última modificación" -->
								<td>
									<!-- Columna "Acciones" -->
									<button
										class="btn btn-primary btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#confirmUpdateTask"
									>
										Editar
									</button>

									<button
										type="button"
										class="btn btn-danger btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#deleteTask"
									>
										Eliminar
									</button>
								</td>
							</tr>
							<tr>
								<td>4</td>
								<!-- Columna "Id" -->
								<td>Dardo</td>
								<!-- Columna "Nombre" -->
								<td>Crear logo</td>
								<!-- Columna "Descripción" -->
								<td>En curso</td>
								<!-- Columna "Estado" -->
								<td>2024/09/12</td>
								<!-- Columna "Última modificación" -->
								<td>
									<!-- Columna "Acciones" -->
									<button
										class="btn btn-primary btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#confirmUpdateTask"
									>
										Editar
									</button>

									<button
										type="button"
										class="btn btn-danger btn-sm"
										data-bs-toggle="modal"
										data-bs-target="#deleteTask"
									>
										Eliminar
									</button>
								</td>
							</tr>
							<!-- Más filas -->
						</tbody>
					</table>
				</div>
			</div>

			<!-- Modal para agregar tarea -->
			<div
				class="modal fade"
				id="addNewTask"
				tabindex="-1"
				aria-labelledby="addNewTaskLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="addNewTaskLabel">Agregar tarea</h5>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Cerrar"
							></button>
						</div>
						<div class="modal-body">
							<form
								id="addNewTaskForm"
								class="shadow border-light border p-4 rounded mb-5"
								action="/api/task"
								method="post"
							>
								<div
									id="success-message"
									class="d-none alert alert-success mt-3"
								></div>

								<div class="p-2 m-2">
									<div class="mb-3 mt-3">
										<label for="task_title" class="form-label">Titulo:</label>
										<input
											type="text"
											class="form-control border border-dark"
											id="task_title_add"
											placeholder="Introduce titulo de la nueva tarea"
											name="task_title"
											required
										/>
										<div class="valid-feedback">Valido.</div>
										<div class="invalid-feedback">Contenido invalido.</div>
									</div>
									<div class="mb-3 mt-3">
										<label for="task_description" class="form-label"
											>Descripción:</label
										>
										<input
											type="text"
											class="form-control border border-dark"
											id="task_description_add"
											placeholder="Introduce una descripción de la tarea "
											name="task_description"
											required
										/>
										<div class="valid-feedback">Valido.</div>
										<div class="invalid-feedback">Contenido invalido.</div>
									</div>

									<div
										style="
											text-align: center;
											display: flex;
											justify-content: center;
											gap: 10px;
										"
									>
										<button type="submit" class="btn btn-primary">Crear</button>

										<button
											type="button"
											class="btn btn-secondary"
											data-bs-dismiss="modal"
										>
											Cancelar
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
					<div class="modal-footer"></div>
				</div>
			</div>

			<!-- Modal para editar tarea -->
			<div
				class="modal fade"
				id="editTask"
				tabindex="-1"
				aria-labelledby="editTaskLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="editTaskLabel">Editar Tarea</h5>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Cerrar"
							></button>
						</div>
						<div class="modal-body">
							<form
								id="editTaskForm"
								class="shadow border-light border p-4 rounded mb-3"
								action="/api/task/:id"
								method="put"
							>
								<div
									id="success-message-update-task"
									class="d-none alert alert-success mt-3"
								></div>

								<div class="p-2 m-2">
									<div class="mb-3 mt-3">
										<label for="task_title" class="form-label">Titulo:</label>
										<input
											type="text"
											class="form-control border border-dark"
											id="task_title_update"
											placeholder="Introduce titulo de la nueva tarea"
											name="task_title"
											required
										/>
										<div class="valid-feedback">Valido.</div>
										<div class="invalid-feedback">Contenido invalido.</div>
									</div>
									<div class="mb-3 mt-3">
										<label for="task_description" class="form-label"
											>Descripción:</label
										>
										<input
											type="text"
											class="form-control border border-dark"
											id="task_description_update"
											placeholder="Introduce una descripción de la tarea "
											name="task_description"
											required
										/>
										<div class="valid-feedback">Valido.</div>
										<div class="invalid-feedback">Contenido invalido.</div>
									</div>

									<div class="mb-3 mt-3">
										<label for="task_status">Estado:</label>
										<select
											id="task_status_update"
											name="task_status"
											class="form-control border border-dark"
										>
											<option value="" disabled selected>
												Seleccione una opción
											</option>
											<option value="in progress">En curso</option>
											<option value="pending">Pendiente</option>
											<option value="blocked">Bloqueada</option>
											<option value="finished">Completada</option>
										</select>
									</div>
								</div>
								<div
									style="
										text-align: center;
										display: flex;
										justify-content: center;
										gap: 10px;
									"
								>
									<button
										type="submit"
										class="btn btn-primary"
										id="saveEditBtn"
									>
										Guardar Cambios
									</button>
									<button
										type="button"
										class="btn btn-secondary"
										data-bs-dismiss="modal"
									>
										Cancelar
									</button>
								</div>
							</form>
						</div>
						<div class="modal-footer"></div>
					</div>
				</div>
			</div>

			<!-- Modal para confirmar edición de tarea -->
			<div
				class="modal fade"
				id="confirmUpdateTask"
				tabindex="-1"
				aria-labelledby="confirmUpdateTaskLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="confirmUpdateTaskLabel">
								Confirmación de Edición de Tarea
							</h5>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Cerrar"
							></button>
						</div>
						<div class="modal-body">
							¿Estás seguro de que deseas editar esta tarea?
						</div>
						<div class="modal-footer">
							<button
								type="button"
								class="btn btn-secondary"
								data-bs-dismiss="modal"
							>
								Cancelar
							</button>
							<button
								type="button"
								class="btn btn-primary"
								id="confirmUpdateBtn"
								data-bs-toggle="modal"
								data-bs-target="#editTask"
							>
								Aceptar
							</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal para eliminar tarea -->
			<div
				class="modal fade"
				id="deleteTask"
				tabindex="-1"
				aria-labelledby="deleteTaskLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="deleteTaskLabel">
								Confirmación de Eliminación de Tarea
							</h5>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Cerrar"
							></button>
						</div>
						<div class="modal-body">
							¿Estás seguro de que deseas eliminar esta tarea?
						</div>
						<div class="modal-footer">
							<button
								type="button"
								class="btn btn-secondary"
								data-bs-dismiss="modal"
							>
								Cancelar
							</button>
							<button
								type="button"
								class="btn btn-danger"
								id="confirmDeleteBtn"
								data-bs-toggle="modal"
								data-bs-target="#confirmDeletedTask"
							>
								Eliminar
							</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal para confirmar eliminación de tarea -->
			<div
				class="modal fade"
				id="confirmDeletedTask"
				tabindex="-1"
				aria-labelledby="confirmDeletedTaskLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5
								class="modal-title deletedTaskTitle"
								id="confirmDeletedTaskLabel"
							></h5>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Cerrar"
							></button>
						</div>
						<div class="modal-body deletedTaskBody"></div>
						<div class="modal-footer">
							<button
								type="button"
								class="btn btn-primary"
								id="confirmUpdateBtn"
								data-bs-toggle="modal"
								data-bs-target="#taskDeleted"
							>
								Aceptar
							</button>
						</div>
					</div>
				</div>
			</div>
		</main>

		<footer>
			<div class="container-fluid bg-dark text-light py-3">
				<div class="row text-center">
					<div class="col-12 col-md-4 mb-3 mb-md-0">
						<div class="mb-1">
							<i class="bi bi-github"></i>
							<a
								class="footer-link text-light text-decoration-none"
								href="https://github.com/dardosantana"
								rel="noopener noreferrer"
								target="_blank"
								>Dardo Santana</a
							>
						</div>
						<div class="mb-1">
							<i class="bi bi-github"></i>
							<a
								class="footer-link text-light text-decoration-none"
								href="https://github.com/Lautidelamano"
								rel="noopener noreferrer"
								target="_blank"
								>Lautaro de la Mano</a
							>
						</div>
					</div>

					<div
						class="col-12 col-md-4 mb-3 mb-md-0 d-flex justify-content-center align-items-center"
					>
						© Desarrollo 2024
					</div>

					<div class="col-12 col-md-4 mb-3 mb-md-0">
						<div class="mb-1">
							<i class="bi bi-github"></i>
							<a
								class="footer-link text-light text-decoration-none"
								href="https://github.com/Rasta0705"
								rel="noopener noreferrer"
								target="_blank"
								>Fernando Barrionuevo</a
							>
						</div>
						<div class="mb-1">
							<i class="bi bi-github"></i>
							<a
								class="footer-link text-light text-decoration-none"
								href="https://github.com/mario-r-aguilar"
								rel="noopener noreferrer"
								target="_blank"
								>Mario Aguilar</a
							>
						</div>
					</div>
				</div>
			</div>
		</footer>

		<script src="../js/form-validation.js"></script>
		<!-- Bootstrap 5.2.3 Page Styles -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
			crossorigin="anonymous"
		></script>
		<!-- jQuery y Bootstrap 4.5.2 -->
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
		<!-- JS de DataTables con Bootstrap 4.5.2 -->
		<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap4.min.js"></script>
		<!-- Archivo js para user-profile -->
		<script src="../js/user-profile.js"></script>
	</body>
</html>
